[comment encoding = UTF-8 /]
[module main('http://www.eclipse.org/uml2/5.0.0/UML')/]
[import ::utils /]
[import backend::api::jersey::services /]
[import backend::api::jersey::tests /]
[import backend::api::jersey::dto /]
[import backend::api::jersey::converters /]
[import backend::api::config::shiro /]
[import backend::api::config::xml /]
[import backend::api::config::pom /]
[import backend::api::config::jerseyapp /]
[import backend::api::config::packageInfo /]

[template public genServices(m : Model, path : String)]
[m.mainPOM()/]
[m.mainJerseyApp(path.concat(m.basePath()))/]
[let webinf : String = m.getWebInfPath()]
    [m.genShiroIni(webinf)/]
    [m.mainXML(webinf)/]
[/let]
[let project : String = path.concat(m.basePath())]
        [m.mainPackageinfo(project)/]
[/let]

[for (c : Class | m.getClasses())]
    [let project : String = path.concat(c.getModel().basePath())]
        [if (not c.isChild())]
            [c.mainJersey(project)/]	
        [/if]
    	[c.mainDTOs(project)/]
    	[c.mainConverter(project)/]
    [/let]
    [let baseTests : String = path.concat(c.getModel().baseTestPath())]
        [if (not c.isChild())]
            [c.mainTests(baseTests)/]
        [/if]
    [/let]
[/for]
[/template]
